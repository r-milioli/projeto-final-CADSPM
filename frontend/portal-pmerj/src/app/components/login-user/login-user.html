<div class="login-container">
  <a (click)="voltarAoInicio()" class="back-link" style="cursor: pointer;">
    <i class="fas fa-arrow-left"></i>
    Voltar ao Início
  </a>
  
  <div class="login-card">
    <div class="login-header">
      <div class="login-logo">
        <i class="fas fa-user"></i>
      </div>
      <h2 class="login-title">Login Cidadão</h2>
      <p class="login-subtitle">Faça login para acessar suas solicitações</p>
    </div>

    <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
      <div class="form-group">
        <label for="email" class="form-label">E-mail</label>
        <input 
          type="email" 
          id="email" 
          name="email"
          [(ngModel)]="credentials.email"
          class="form-input"
          required
          email
          placeholder="Digite seu e-mail">
      </div>

      <div class="form-group">
        <label for="senha" class="form-label">Senha</label>
        <input 
          type="password" 
          id="senha" 
          name="senha"
          [(ngModel)]="credentials.senha"
          class="form-input"
          required
          placeholder="Digite sua senha">
      </div>

      <button type="submit" class="login-btn" [disabled]="loading">
        <span *ngIf="!loading">Entrar</span>
        <span *ngIf="loading">
          <div class="spinner"></div>
          Entrando...
        </span>
      </button>

      <div class="error-message" *ngIf="errorMessage">
        <i class="fas fa-exclamation-circle"></i>
        {{ errorMessage }}
      </div>
    </form>

    <div class="login-footer">
      <p>Não tem uma conta? <a (click)="showCadastro = true" style="cursor: pointer;">Cadastre-se</a></p>
    </div>
  </div>

  <!-- Modal de Cadastro -->
  <div class="modal-overlay" *ngIf="showCadastro" (click)="showCadastro = false">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Cadastro de Cidadão</h3>
        <button class="modal-close" (click)="showCadastro = false">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form class="cadastro-form" (ngSubmit)="onCadastro($event)" #cadastroForm="ngForm">
        <div class="form-group">
          <label for="nome" class="form-label">Nome Completo</label>
          <input 
            type="text" 
            id="nome" 
            name="nome"
            [(ngModel)]="cadastroData.nome"
            class="form-input"
            required
            placeholder="Digite seu nome completo">
        </div>

        <div class="form-group">
          <label for="cadastro-email" class="form-label">E-mail</label>
          <input 
            type="email" 
            id="cadastro-email" 
            name="cadastro-email"
            [(ngModel)]="cadastroData.email"
            class="form-input"
            required
            email
            placeholder="Digite seu e-mail">
        </div>

        <div class="form-group">
          <label for="telefone" class="form-label">Telefone (opcional)</label>
          <input 
            type="tel" 
            id="telefone" 
            name="telefone"
            [(ngModel)]="cadastroData.telefone"
            class="form-input"
            placeholder="Digite seu telefone">
        </div>

        <div class="form-group">
          <label for="documento" class="form-label">CPF/CNPJ (opcional)</label>
          <input 
            type="text" 
            id="documento" 
            name="documento"
            [(ngModel)]="cadastroData.documento"
            class="form-input"
            placeholder="Digite seu CPF ou CNPJ">
        </div>

        <div class="form-group">
          <label for="cadastro-senha" class="form-label">Senha</label>
          <input 
            type="password" 
            id="cadastro-senha" 
            name="cadastro-senha"
            [(ngModel)]="cadastroData.senha"
            class="form-input"
            required
            placeholder="Digite sua senha">
        </div>

        <button type="submit" class="login-btn" [disabled]="cadastroLoading">
          <span *ngIf="!cadastroLoading">Cadastrar</span>
          <span *ngIf="cadastroLoading">
            <div class="spinner"></div>
            Cadastrando...
          </span>
        </button>

        <div class="error-message" *ngIf="cadastroError">
          <i class="fas fa-exclamation-circle"></i>
          {{ cadastroError }}
        </div>
      </form>
    </div>
  </div>
</div>
